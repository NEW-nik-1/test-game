<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>IPTV, –†–∞–¥–∏–æ –∏ –ò–≥—Ä—ã</title>
<style>
  /* –§–æ–Ω (–∑–∞–º–µ–Ω–∏—Ç–µ URL –Ω–∞ —Å–≤–æ–π JPEG) */
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: url('https://your-jpeg-image-url.com/image.jpeg') center center / cover no-repeat fixed;
    color: white;
    user-select: none;
    overflow-y: hidden; /* –£–¥–∞–ª—è–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
  }
  /* –®–∞–ø–∫–∞ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º –∏ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º */
  header {
    position: fixed;
    top: 0; left: 0; right: 0;
    height: 48px;
    background: linear-gradient(90deg, #000, #555);
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    z-index: 3000;
    user-select: none;
  }
  /* –ö–Ω–æ–ø–∫–∏ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º —Ç–æ—á–∫–∏ */
  header button {
    position: relative;
    min-width: 80px;
    padding: 8px 18px;
    background: linear-gradient(180deg, #222, #111);
    border: 1px solid #666;
    border-radius: 6px;
    font-weight: bold;
    font-size: 1rem;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
  }
  /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫—Ä—É–≥–ª–∞—è —Ç–æ—á–∫–∞ —Å–ø—Ä–∞–≤–∞ */
  header button::after {
    content: '';
    position: absolute;
    top: 6px;
    right: 8px;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #444; /* —Ç–æ—á–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ */
    pointer-events: none;
  }
  /* –ê–∫—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –∏ –∑–µ–ª—ë–Ω–∞—è —Ç–æ—á–∫–∞ */
  header button.active {
    background: linear-gradient(180deg, #ccc, #eee);
    color: #000;
  }
  header button.active::after {
    background: #4caf50; /* –∑–µ–ª—ë–Ω–∞—è —Ç–æ—á–∫–∞ */
  }

  /* –£–¥–∞–ª—è–µ–º —Ç–µ–Ω–∏ —É –≤—Å–µ—Ö –æ–∫–æ–Ω */
  #tv-container, #radio-container, #games-overlay, #game-window {
    box-shadow: none !important;
  }

  main {
    margin-top: 48px;
    display: flex;
    justify-content: center;
    gap: 14px;
    padding-bottom: 64px;
    overflow: hidden;
  }

  /* –¢–í –ü–ª–µ–µ—Ä –∏ —Å–ø–∏—Å–æ–∫ */
  #tv-container {
    display: none;
    flex-direction: column;
    width: 900px; /* –ó–∞–¥–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
    background: linear-gradient(180deg, #222, #111);
    border-radius: 8px;
    user-select: none;
  }
  #tv-video {
    width: 100%; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (900px) */
    height: auto; /* –í—ã—Å–æ—Ç–∞ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ –≤–∏–¥–µ–æ */
    background: black;
    outline: none;
  }
  #tv-channels-list {
    max-height: 320px; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã, —á—Ç–æ–±—ã –Ω–µ —Å–∫—Ä–æ–ª–ª–∏–ª—Å—è –≤–µ—Å—å —Å–∞–π—Ç */
    overflow-y: auto;
    background: #0c0c0c;
    border-top: 1px solid #444;
    border-radius: 0 0 8px 8px;
    padding: 8px 0;
  }
  #tv-channels-list h3 {
    margin: 6px auto;
    width: 50%;
    text-align: center;
    font-weight: bold;
    border: 2px solid #555;
    border-radius: 8px;
    user-select: none;
  }
  #tv-channels-list h3.music {
    border-color: #4caf50;
  }
  #tv-channels-list h3.cinema {
    border-color: #2196f3;
  }
  #tv-channels-list .channel-item {
    padding: 8px 0;
    text-align: center;
    cursor: pointer;
    user-select: none;
    border-radius: 5px;
  }
  #tv-channels-list .channel-item:hover {
    background-color: #333;
  }
  #tv-channels-list .channel-item.active {
    background-color: #555;
    font-weight: bold;
  }

  /* –†–∞–¥–∏–æ */
  #radio-container {
    display: none;
    flex-direction: column;
    width: 360px;
    background: linear-gradient(180deg, #222, #111);
    border-radius: 8px;
    user-select: none;
  }
  #radio-player {
    width: 100%;
    border-radius: 8px 8px 0 0;
    background: black;
    outline: none;
  }
  #radio-list {
    max-height: 320px;
    overflow-y: auto;
    background: #0a0a0a;
    border-top: 1px solid #444;
    border-radius: 0 0 8px 8px;
    padding: 8px 0;
  }
  #radio-list .radio-item {
    text-align: center;
    padding: 10px 0;
    cursor: pointer;
    user-select: none;
    border-radius: 5px;
  }
  #radio-list .radio-item:hover {
    background: #444;
  }
  #radio-list .radio-item.active {
    background: #888888bb;
    font-weight: bold;
    color: #ddd;
  }

  /* –ò–≥—Ä—ã - –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –º–µ–Ω—é */
  #games-overlay {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 420px;
    max-height: 75vh;
    background: linear-gradient(180deg, #222, #000);
    border-radius: 12px;
    color: white;
    display: flex;
    flex-direction: column;
    user-select: none;
    z-index: 5000;
  }
  #games-overlay.hidden {
    display: none;
  }
  #games-header {
    display: flex;
    justify-content: space-between;
    padding: 10px 14px;
    font-weight: bold;
    font-size: 1.1rem;
    border-bottom: 1px solid #555;
  }
  #games-close {
    cursor: pointer;
    font-size: 1.6rem;
    color: #ccc;
  }
  #games-close:hover {
    color: white;
  }
  #games-list {
    overflow-y: auto;
    flex-grow: 1;
    padding: 12px 14px;
  }
  #games-list .game-item {
    padding: 12px 8px;
    text-align: center;
    cursor: pointer;
    border-bottom: 1px solid #555;
    border-radius: 10px;
    user-select: none;
  }
  #games-list .game-item:hover {
    background-color: #333;
  }

  /* –ò–≥—Ä–æ–≤–æ–µ –æ–∫–Ω–æ */
  #game-window {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 80vw;
    height: 80vh;
    background: black;
    border-radius: 10px;
    display: none;
    flex-direction: column;
    z-index: 6000;
    user-select: none;
  }
  #game-window.show {
    display: flex;
  }
  #game-topbar {
    background: #222;
    display: flex;
    justify-content: flex-end;
    gap: 14px;
    padding: 6px 12px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    color: #ddd;
  }
  #game-topbar span.btn-icon {
    font-weight: bold;
    font-size: 1.3rem;
    cursor: pointer;
    color: #aaa;
    line-height: 1;
    user-select: none;
  }
  #game-topbar span.btn-icon:hover {
    color: white;
  }
  #game-topbar span.tooltip {
    position: relative;
  }
  #game-topbar span.tooltip:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    top: -28px; left: 50%;
    transform: translateX(-50%);
    background: #444;
    padding: 3px 7px;
    border-radius: 4px;
    font-size: 0.75rem;
    white-space: nowrap;
    color: #eee;
    pointer-events: none;
  }
  #game-iframe {
    flex-grow: 1;
    border: none;
    border-radius: 0 0 10px 10px;
    background: black;
  }

  /* –°–∫—Ä–æ–ª–ª–±–∞—Ä—ã */
  #tv-channels-list::-webkit-scrollbar,
  #radio-list::-webkit-scrollbar,
  #games-list::-webkit-scrollbar {
    width: 8px;
  }
  #tv-channels-list::-webkit-scrollbar-thumb,
  #radio-list::-webkit-scrollbar-thumb,
  #games-list::-webkit-scrollbar-thumb {
    background-color: #555;
    border-radius: 4px;
  }

  /* –ù–∏–∂–Ω–∏–π –ø—Ä–∞–≤—ã–π –º–µ–ª–∫–∏–π —Ç–µ–∫—Å—Ç */
  footer {
    position: fixed;
    bottom: 8px;
    right: 10px;
    font-size: 0.7rem;
    color: #999999cc;
    user-select: none;
    pointer-events: none;
    font-family: monospace;
  }
</style>
</head>
<body>

<header role="banner" aria-label="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">
  <button id="btn-tv" aria-pressed="false" title="–í–∫–ª—é—á–∏—Ç—å –¢–í">–¢–í</button>
  <button id="btn-radio" aria-pressed="false" title="–í–∫–ª—é—á–∏—Ç—å –†–∞–¥–∏–æ">–†–ê–î–ò–û</button>
  <button id="btn-games" aria-pressed="false" title="–û—Ç–∫—Ä—ã—Ç—å –ò–≥—Ä—ã">–ò–ì–†–´</button>
</header>

<main>
  <section id="tv-container" role="region" aria-label="–¢–µ–ª–µ–≤–∏–∑–∏–æ–Ω–Ω—ã–π –ø–ª–µ–µ—Ä –∏ —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤" tabindex="0">
    <video id="tv-video" playsinline controls></video>
    <div id="tv-channels-list" aria-label="–°–ø–∏—Å–æ–∫ —Ç–µ–ª–µ–≤–∏–∑–∏–æ–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤" tabindex="0">
      <h3 class="music" tabindex="-1">_üéµ_ –ú–£–ó–´–ö–ê _üéµ_</h3>
      <div class="channel-item" tabindex="0" data-url="http://stream.mediawork.cz/retrotv/retrotvHQ1/playlist.m3u8">Retro TV</div>
      <div class="channel-item" tabindex="0" data-url="https://hls-03-video.webcaramba.com/rutv/live_480/index.m3u8">RU TV</div>
      <div class="channel-item" tabindex="0" data-url="http://streamer.rtcommufa.ru:1935/ptica/ptica1/playlist.m3u8">Ptica 1</div>
      <div class="channel-item" tabindex="0" data-url="http://live.stranafm.cdnvideo.ru/stranafm/stranafm_hd.sdp/playlist.m3u8">Strana FM HD</div>
      <div class="channel-item" tabindex="0" data-url="http://tntmsmotr.mediacdn.ru/cdn/smotr/playlist_hdhigh.m3u8">TNT High</div>
      <div class="channel-item" tabindex="0" data-url="https://hls-shansontv.cdnvideo.ru/shansontv/shansontv-sd.smil/playlist.m3u8">Shanson TV</div>
      <h3 class="cinema" tabindex="-1">_üé¨_ –ö–ò–ù–û _üé¨_</h3>
      <div class="channel-item" tabindex="0" data-url="http://live-nikatv.cdnvideo.ru/nikatv/nikatv.sdp/playlist.m3u8">Nika TV</div>
      <div class="channel-item" tabindex="0" data-url="https://zabava-htlive.cdn.ngenix.net/hls/CH_TV3/variant.m3u8">TV 3</div>
      <div class="channel-item" tabindex="0" data-url="http://rt-mos-htlive.cdn.ngenix.net/hls/CH_R04_DOVERIE/variant.m3u8">DOVERIE</div>
    </div>
  </section>

  <section id="radio-container" role="region" aria-label="–†–∞–¥–∏–æ –ø–ª–µ–µ—Ä –∏ —Å–ø–∏—Å–æ–∫ —Ä–∞–¥–∏–æ–∫–∞–Ω–∞–ª–æ–≤" tabindex="0">
    <audio id="radio-player" controls preload="auto"></audio>
    <div id="radio-list" aria-label="–°–ø–∏—Å–æ–∫ —Ä–∞–¥–∏–æ–∫–∞–Ω–∞–ª–æ–≤" tabindex="0">
      <div class="radio-item" tabindex="0" data-src="https://dorognoe.hostingradio.ru/radio">–î–æ—Ä–æ–∂–Ω–æ–µ —Ä–∞–¥–∏–æ</div>
      <div class="radio-item" tabindex="0" data-src="https://online2.100i6fm.ru/city">–†–∞–¥–∏–æ –°–ò–¢–ò</div>
      <div class="radio-item" tabindex="0" data-src="https://pub0101.101.ru/stream/air/aac/64/100">–ê–≤—Ç–æ—Ä–∞–¥–∏–æ</div>
      <div class="radio-item" tabindex="0" data-src="https://radiorecord.hostingradio.ru/rr_main96.aacp">–†–∞–¥–∏–æ –†–µ–∫–æ—Ä–¥</div>
      <div class="radio-item" tabindex="0" data-src="https://stream.newradio.ru/novoe96.aacp">–ù–æ–≤–æ–µ —Ä–∞–¥–∏–æ</div>
      <div class="radio-item" tabindex="0" data-src="https://retro.hostingradio.ru:8043/retro256.mp3">–†–µ—Ç—Ä–æ –§–ú</div>
      <div class="radio-item" tabindex="0" data-src="https://pub0202.101.ru:8443/stream/air/aac/64/99">–†–∞–¥–∏–æ Energy</div>
      <div class="radio-item" tabindex="0" data-src="https://ep256.hostingradio.ru:8052/europaplus256.mp3">–ï–≤—Ä–æ–ø–∞ –ø–ª—é—Å</div>
      <div class="radio-item" tabindex="0" data-src="https://nashe1.hostingradio.ru/nashe-256">–ù–∞—à–µ —Ä–∞–¥–∏–æ</div>
      <div class="radio-item" tabindex="0" data-src="https://myradio24.org/5129">BEST DEEP FM</div>
      <div class="radio-item" tabindex="0" data-src="https://rusradio.hostingradio.ru/rusradio96.aacp">–†—É—Å—Å–∫–æ–µ —Ä–∞–¥–∏–æ</div>
    </div>
  </section>
</main>

<div id="games-overlay" class="hidden" role="dialog" aria-modal="true" aria-label="–ú–µ–Ω—é –ò–≥—Ä—ã">
  <div id="games-header">
    <span>–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É</span>
    <span id="games-close" role="button" tabindex="0" aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é –∏–≥—Ä">‚úñ</span>
  </div>
  <div id="games-list" tabindex="0" aria-label="–°–ø–∏—Å–æ–∫ –∏–≥—Ä">
    <div class="game-item" tabindex="0" data-url="https://html5.gamemonetize.co/dd5rs8etri5hw51g32sk69qfdoov5tq2/">Gary's World</div>
    <div class="game-item" tabindex="0" data-url="https://www.onlinegames.io/games/2021/unity2/crazy-ball-adventures/index.html">crazy-ball-adventures</div>
    <div class="game-item" tabindex="0" data-url="https://www.gamenora.com/embed/subway-horror-chapter-1">subway-horror-chapter</div>
    <div class="game-item" tabindex="0" data-url="https://www.gamenora.com/embed/a-difficult-game-about-climbing">A Difficult Game About Climbing</div>
    <div class="game-item" tabindex="0" data-url="https://www.onlinegames.io/games/2023/unity/cross-the-road/index.html">cross-the-road</div>
    <div class="game-item" tabindex="0" data-url="https://s3.eponesh.com/games/8866/">motorcycle racer</div>
    <div class="game-item" tabindex="0" data-url="https://app-165758.games.s3.yandex.net/165758/ghtg4xyuxt09og6gtji0jcl6aw8el4w4/index.html">Moto Rider GO</div>
  </div>
</div>

<div id="game-window" role="region" aria-label="–û–∫–Ω–æ –ò–≥—Ä—ã" aria-live="polite">
  <div id="game-topbar">
    <span id="game-minimize" role="button" tabindex="0" aria-label="–û–ø—É—Å—Ç–∏—Ç—å –æ–∫–Ω–æ ‚ñΩ" class="btn-icon">‚ñΩ</span>
    <span id="game-maximize" role="button" tabindex="0" aria-label="–í–µ—Ä–Ω—É—Ç—å –æ–∫–Ω–æ ‚ñ≥" class="btn-icon" style="display:none;">‚ñ≥</span>
    <span id="game-sound-toggle" role="button" tabindex="0" aria-label="–ü–æ–¥—Å–∫–∞–∑–∫–∞: —á—Ç–æ–±—ã –æ—Ç–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã" class="btn-icon tooltip" data-tooltip="–û—Ç–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫ ‚Äî –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∏–≥—Ä—ã" style="cursor: default;">?</span>
    <span id="game-fullscreen" role="button" tabindex="0" aria-label="–í–∫–ª—é—á–∏—Ç—å –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º" class="btn-icon tooltip" data-tooltip="–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º">‚ùè</span>
    <span id="game-fullscreen-exit" role="button" tabindex="0" aria-label="–í—ã–π—Ç–∏ –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞" class="btn-icon tooltip" data-tooltip="–í—ã–π—Ç–∏ –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞" style="display:none;">‚ùè</span>
    <span id="game-close" role="button" tabindex="0" aria-label="–ó–∞–∫—Ä—ã—Ç—å –∏–≥—Ä—É" class="btn-icon">‚úñ</span>
  </div>
  <iframe id="game-iframe" sandbox="allow-scripts allow-same-origin allow-forms allow-pointer-lock allow-popups" allowfullscreen tabindex="0" frameborder="0"></iframe>
</div>

<footer>–ü—Ä–æ–µ–∫—Ç —Å–¥–µ–ª–∞–Ω, –ø—Ä–∏–¥—É–º–∞–Ω MUZER_play .</footer>

<script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.1/dist/hls.min.js"></script>
<script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>

<script>
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è VK Bridge –¥–ª—è VK Mini Apps
  vkBridge.send('VKWebAppInit');

  (() => {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ DOM-—ç–ª–µ–º–µ–Ω—Ç—ã
    const btnTv = document.getElementById('btn-tv');
    const btnRadio = document.getElementById('btn-radio');
    const btnGames = document.getElementById('btn-games');

    const tvContainer = document.getElementById('tv-container');
    const tvVideo = document.getElementById('tv-video');
    const tvChannelsList = document.getElementById('tv-channels-list');

    const radioContainer = document.getElementById('radio-container');
    const radioPlayer = document.getElementById('radio-player');
    const radioList = document.getElementById('radio-list');

    const gamesOverlay = document.getElementById('games-overlay');
    const gamesClose = document.getElementById('games-close');
    const gamesList = document.getElementById('games-list');

    const gameWindow = document.getElementById('game-window');
    const gameIframe = document.getElementById('game-iframe');
    const gameMinimize = document.getElementById('game-minimize');
    const gameMaximize = document.getElementById('game-maximize');
    const gameSoundToggle = document.getElementById('game-sound-toggle');
    const gameFullscreen = document.getElementById('game-fullscreen');
    const gameFullscreenExit = document.getElementById('game-fullscreen-exit');
    const gameClose = document.getElementById('game-close');

    let hls = null; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Hls.js
    let currentTvUrl = null; // –¢–µ–∫—É—â–∏–π URL –¢–í –∫–∞–Ω–∞–ª–∞
    let currentRadioSrc = null; // –¢–µ–∫—É—â–∏–π URL —Ä–∞–¥–∏–æ—Å—Ç–∞–Ω—Ü–∏–∏

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–±—Ä–æ—Å–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –≤ —à–∞–ø–∫–µ
    function clearActiveButtons() {
      [btnTv, btnRadio, btnGames].forEach(btn => {
        btn.classList.remove('active');
        btn.setAttribute('aria-pressed', 'false');
      });
    }

    // --- –§—É–Ω–∫—Ü–∏–∏ –¢–í-–ø–ª–µ–µ—Ä–∞ ---
    function showTv() {
      tvContainer.style.display = 'flex';
      radioContainer.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º —Ä–∞–¥–∏–æ
      clearActiveButtons();
      btnTv.classList.add('active');
      btnTv.setAttribute('aria-pressed', 'true');
      gamesOverlay.classList.add('hidden'); // –°–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –∏–≥—Ä
      tvVideo.muted = false; // –í–∫–ª—é—á–∞–µ–º –∑–≤—É–∫ —É –¢–í-–ø–ª–µ–µ—Ä–∞

      // –ï—Å–ª–∏ –Ω–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ URL –¢–í-–∫–∞–Ω–∞–ª–∞, –∑–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π –∏–∑ —Å–ø–∏—Å–∫–∞
      if (!currentTvUrl) {
        const first = tvChannelsList.querySelector('.channel-item');
        if (first) playTvChannel(first.dataset.url, first);
      } else {
        // –ò–Ω–∞—á–µ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∫–∞–Ω–∞–ª–∞
        playTvChannel(currentTvUrl, tvChannelsList.querySelector('.channel-item.active'));
      }
      stopRadio(); // –û—Ç–∫–ª—é—á–∞–µ–º —Ä–∞–¥–∏–æ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –¢–í
    }

    function playTvChannel(url, el) {
      if (currentTvUrl === url) return; // –ï—Å–ª–∏ –∫–∞–Ω–∞–ª —É–∂–µ –∏–≥—Ä–∞–µ—Ç, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
      currentTvUrl = url;

      // –°–±—Ä–æ—Å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –¥–ª—è –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ
      tvChannelsList.querySelectorAll('.channel-item').forEach(ch => ch.classList.remove('active'));
      if(el) el.classList.add('active');

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ Hls.js
      if (hls) {
        hls.destroy(); // –£–Ω–∏—á—Ç–æ–∂–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä Hls.js
        hls = null;
      }

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞—Ç–∏–≤–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É HLS (–¥–ª—è Safari)
      if (tvVideo.canPlayType('application/vnd.apple.mpegurl')) {
        tvVideo.src = url;
        tvVideo.play().catch(() => {});
      } else if (Hls.isSupported()) { // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Hls.js –¥–ª—è –¥—Ä—É–≥–∏—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
        hls = new Hls();
        hls.loadSource(url);
        hls.attachMedia(tvVideo);
        hls.on(Hls.Events.MANIFEST_PARSED, () => {
          tvVideo.play().catch(() => {});
        });
      } else {
        // Fallback –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤ –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ HLS –∏ Hls.js (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å)
        tvVideo.src = url;
        tvVideo.play().catch(() => {});
      }
      stopRadio(); // –û—Ç–∫–ª—é—á–∞–µ–º —Ä–∞–¥–∏–æ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –¢–í
    }

    function stopTv() {
      if (hls) { hls.destroy(); hls = null; }
      if (!tvVideo.paused) tvVideo.pause();
      tvVideo.src = '';
      currentTvUrl = null;
      btnTv.classList.remove('active');
      btnTv.setAttribute('aria-pressed', 'false');
    }

    // --- –§—É–Ω–∫—Ü–∏–∏ –†–∞–¥–∏–æ-–ø–ª–µ–µ—Ä–∞ ---
    function showRadio() {
      radioContainer.style.display = 'flex';
      tvContainer.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º –¢–í
      clearActiveButtons();
      btnRadio.classList.add('active');
      btnRadio.setAttribute('aria-pressed', 'true');
      gamesOverlay.classList.add('hidden'); // –°–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –∏–≥—Ä

      // –ï—Å–ª–∏ –Ω–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ URL —Ä–∞–¥–∏–æ—Å—Ç–∞–Ω—Ü–∏–∏, –∑–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—É—é –∏–∑ —Å–ø–∏—Å–∫–∞
      if (!currentRadioSrc) {
        const first = radioList.querySelector('.radio-item');
        if (first) playRadioStation(first.dataset.src, first);
      } else {
        // –ò–Ω–∞—á–µ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Ç–∞–Ω—Ü–∏–∏
        playRadioStation(currentRadioSrc, radioList.querySelector('.radio-item.active'));
      }
      stopTv(); // –û—Ç–∫–ª—é—á–∞–µ–º –¢–í –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —Ä–∞–¥–∏–æ
    }

    function playRadioStation(src, el) {
      if (currentRadioSrc === src) return; // –ï—Å–ª–∏ —Å—Ç–∞–Ω—Ü–∏—è —É–∂–µ –∏–≥—Ä–∞–µ—Ç, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
      currentRadioSrc = src;

      // –°–±—Ä–æ—Å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –¥–ª—è –≤—Å–µ—Ö —Å—Ç–∞–Ω—Ü–∏–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π
      radioList.querySelectorAll('.radio-item').forEach(r => r.classList.remove('active'));
      if(el) el.classList.add('active');

      radioPlayer.src = src;
      radioPlayer.play().catch(() => {});
      stopTv(); // –û—Ç–∫–ª—é—á–∞–µ–º –¢–í –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —Ä–∞–¥–∏–æ
    }

    function stopRadio() {
      if (!radioPlayer.paused) radioPlayer.pause();
      radioPlayer.src = '';
      currentRadioSrc = null;
      btnRadio.classList.remove('active');
      btnRadio.setAttribute('aria-pressed', 'false');
      radioList.querySelectorAll('.radio-item').forEach(r => r.classList.remove('active'));
    }

    // --- –§—É–Ω–∫—Ü–∏–∏ –º–µ–Ω—é –ò–≥—Ä ---
    function openGames() {
      gamesOverlay.classList.remove('hidden');
      gamesOverlay.focus();
      clearActiveButtons();
      btnGames.classList.add('active');
      btnGames.setAttribute('aria-pressed', 'true');
      // –¢–í –∏ –†–∞–¥–∏–æ –æ—Å—Ç–∞—é—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ (–∏–≥—Ä–æ–≤–æ–µ –æ–∫–Ω–æ –ø–æ–≤–µ—Ä—Ö)
    }

    function closeGames() {
      gamesOverlay.classList.add('hidden');
      btnGames.classList.remove('active');
      btnGames.setAttribute('aria-pressed', 'false');
    }

    // --- –§—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä–æ–≤–æ–≥–æ –æ–∫–Ω–∞ ---
    let gameMinimized = false; // –°–æ—Å—Ç–æ—è–Ω–∏–µ: —Å–≤—ë—Ä–Ω—É—Ç–æ –ª–∏ –∏–≥—Ä–æ–≤–æ–µ –æ–∫–Ω–æ
    let gameMuted = false; // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –∑–∞–≥–ª—É—à–µ–Ω–æ –ª–∏ –∏–≥—Ä–æ–≤–æ–µ –æ–∫–Ω–æ (–¥–ª—è –ø–æ–¥—Å–∫–∞–∑–∫–∏)
    let fullscreenState = false; // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º

    function openGame(url) {
      gameIframe.src = url;
      gameWindow.classList.add('show');
      gameMinimized = false;
      gameMuted = false;
      fullscreenState = false;
      // –°–±—Ä–æ—Å –ø–æ–ª–æ–∂–µ–Ω–∏—è –∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –æ–∫–Ω–∞, –µ—Å–ª–∏ –æ–Ω–æ –±—ã–ª–æ —Å–≤—ë—Ä–Ω—É—Ç–æ
      resetGameWindowPosition();
      closeGames(); // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –∏–≥—Ä –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã
    }

    function closeGame() {
      gameWindow.classList.remove('show');
      gameIframe.src = ''; // –û—á–∏—â–∞–µ–º src iframe
    }

    function minimizeGame() {
      if (gameMinimized) return; // –ï—Å–ª–∏ —É–∂–µ —Å–≤—ë—Ä–Ω—É—Ç–æ, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
      gameMinimized = true;
      gameWindow.style.top = 'auto';
      gameWindow.style.bottom = '6px';
      gameWindow.style.left = '50%';
      gameWindow.style.width = '420px';
      gameWindow.style.height = '50px';
      gameWindow.style.transform = 'translateX(-50%)';
      gameIframe.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º iframe
      gameMinimize.style.display = 'none';
      gameMaximize.style.display = 'inline-block';
    }

    function maximizeGame() {
      if (!gameMinimized) return; // –ï—Å–ª–∏ –Ω–µ —Å–≤—ë—Ä–Ω—É—Ç–æ, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
      gameMinimized = false;
      resetGameWindowPosition(); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
      gameIframe.style.display = 'block'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º iframe
      gameMinimize.style.display = 'inline-block';
      gameMaximize.style.display = 'none';
    }

    // –°–±—Ä–æ—Å –ø–æ–ª–æ–∂–µ–Ω–∏—è –∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏–≥—Ä–æ–≤–æ–≥–æ –æ–∫–Ω–∞ –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º
    function resetGameWindowPosition() {
      gameWindow.style.top = '50%';
      gameWindow.style.bottom = '';
      gameWindow.style.left = '50%';
      gameWindow.style.width = '80vw';
      gameWindow.style.height = '80vh';
      gameWindow.style.transform = 'translate(-50%, -50%)';
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è "–æ—Ç–∫–ª—é—á–µ–Ω–∏—è" –∑–≤—É–∫–∞ (–≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä, —Ç–∞–∫ –∫–∞–∫ –≤ –∏–≥—Ä–µ –∑–≤—É–∫ –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è)
    function toggleSound() {
      gameMuted = !gameMuted;
      // –ü–æ–¥—Å–∫–∞–∑–∫–∞: –∏–∑–º–µ–Ω–∏—Ç—å –∑–≤—É–∫ –≤ —Å–∞–º–æ–π –∏–≥—Ä–µ, –∏–∫–æ–Ω–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ –¥–ª—è –∫–ª–∏–∫–∞
      // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å postMessage –≤ iframe, –µ—Å–ª–∏ –±—ã –∏–≥—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∏ mute
      updateGameControlsVisual();
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∫–æ–Ω–∫–∏ –∑–≤—É–∫–∞
    function updateGameControlsVisual() {
      gameSoundToggle.style.color = gameMuted ? '#c00' : '#aaa'; // –ö—Ä–∞—Å–Ω—ã–π –∏–ª–∏ —Å–µ—Ä—ã–π —Ü–≤–µ—Ç –∏–∫–æ–Ω–∫–∏
    }

    // –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –∏–≥—Ä–æ–≤–æ–≥–æ –æ–∫–Ω–∞
    function enterFullscreen() {
      if(gameWindow.requestFullscreen) {
        gameWindow.requestFullscreen();
        fullscreenState = true;
        gameFullscreen.style.display = 'none';
        gameFullscreenExit.style.display = 'inline-block';
      }
    }

    function exitFullscreen() {
      if(document.exitFullscreen) {
        document.exitFullscreen();
        fullscreenState = false;
        gameFullscreen.style.display = 'inline-block';
        gameFullscreenExit.style.display = 'none';
      }
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    document.addEventListener('fullscreenchange', () => {
      if(!document.fullscreenElement){ // –ï—Å–ª–∏ –≤—ã—à–ª–∏ –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
        fullscreenState = false;
        gameFullscreen.style.display = 'inline-block';
        gameFullscreenExit.style.display = 'none';
      }
    });

    // --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ —à–∞–ø–∫–∏ ---
    btnTv.addEventListener('click', showTv);
    btnRadio.addEventListener('click', showRadio);
    btnGames.addEventListener('click', () => {
      if (gamesOverlay.classList.contains('hidden')) openGames();
      else closeGames();
    });

    // --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ –¢–í –∏ –†–∞–¥–∏–æ (—Ç–æ–ª—å–∫–æ –ª–µ–≤—ã–π –∫–ª–∏–∫) ---
    tvChannelsList.addEventListener('click', e => {
      if(e.button !== 0) return; // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –ª–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏
      const target = e.target.closest('.channel-item');
      if(target) playTvChannel(target.dataset.url, target);
    });

    radioList.addEventListener('click', e => {
      if(e.button !== 0) return; // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –ª–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏
      const target = e.target.closest('.radio-item');
      if(target) playRadioStation(target.dataset.src, target);
    });

    // --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–µ–Ω—é –∏–≥—Ä ---
    gamesClose.addEventListener('click', closeGames);
    gamesList.addEventListener('click', e => {
      if(e.button !== 0) return; // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –ª–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏
      const target = e.target.closest('.game-item');
      if(target) openGame(target.dataset.url);
    });

    // --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–≤—ã–º –æ–∫–Ω–æ–º ---
    gameClose.addEventListener('click', closeGame);
    gameMinimize.addEventListener('click', minimizeGame);
    gameMaximize.addEventListener('click', maximizeGame);
    // –ö–Ω–æ–ø–∫–∞ –∑–≤—É–∫–∞ –¥–ª—è –∏–≥—Ä—ã —Ç–µ–ø–µ—Ä—å –Ω–µ–∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞, —Ç–æ–ª—å–∫–æ –ø–æ–¥—Å–∫–∞–∑–∫–∞
    // gameSoundToggle.addEventListener('click', toggleSound); // –£–¥–∞–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
    gameFullscreen.addEventListener('click', enterFullscreen);
    gameFullscreenExit.addEventListener('click', exitFullscreen);

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ä–∞–¥–∏–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener('load', showRadio);
  })();
</script>

</body>
</html>
